var csvExportService=function(){"use strict";return{parse:function(e,n,r,t){var i,o,c,s,a,d;if(t=t||",",e="object"!=typeof e?JSON.parse(e):e,i="",o="",n){c=e[0];for(s in e[0])if(e[0].hasOwnProperty(s)){if(0===s.indexOf("$"))continue;r?(a=s.toString(),o+='"'+a.replace(/"/g,'""')+'"'+t):o+=s+t}o=o.slice(0,-1),i+=o+"\r\n"}for(d=0;d<e.length;d+=1){o="";for(s in e[0])if(e[0].hasOwnProperty(s)){if(0===s.indexOf("$"))continue;r?(a=e[d][s].toString(),o+='"'+a.replace(/"/g,'""')+'"'+t):o+=e[d][s]+t}o=o.slice(0,-1),i+=o+"\r\n"}return i},msieversion:function(){var e=window.navigator.userAgent,n=e.indexOf("MSIE ");return n>0||!!navigator.userAgent.match(/Trident.*rv\:11\./)},JSONToCSVConverter:function(e,n){var r,t,i,o="Result";return 0===e.length?void console.error("Invalid data"):void(this.msieversion()?(r=window.open(),r.document.write("sep=,\r\n"+e),r.document.close(),r.document.execCommand("SaveAs",!0,o+".csv"),r.close()):(t="data:application/csv;charset=utf-8,"+escape(e),i=document.createElement("a"),i.href=t,i.style.cssText="visibility:hidden",i.download=o+".csv",document.body.appendChild(i),i.click(),document.body.removeChild(i)))}}};
var csvExportController=function(o,r){"use strict";var t=";",s="report-"+(new Date).getTime()+".csv";o.form={},o.form.separator=t,o.form.withLabels=!0,o.form.withQuotes=!0,o.form.isVisible=!1,o.form.csv="",o.actions={},o.actions.showDialog=function(){o.form.isVisible=!0},o.actions.doDownload=function(){r.JSONToCSVConverter(o.source,s)},o.actions.toCSV=function(){o.form.csv=r.parse(o.source,o.form.withLabels,o.form.withQuotes,o.form.separator)}};
var csvExportDirective=function(){"use strict";return{restrict:"EA",replace:!0,templateUrl:function(t,o){return o.templateUrl||"../dist/templates/csv-export-template.html"},controller:"CsvExportController",scope:{source:"="},link:function(t,o,e,r){t.$watch("source",function(){t.actions.toCSV(t.source)}),t.$watch("form.withLabels",function(){t.actions.toCSV(t.source)}),t.$watch("form.withQuotes",function(){t.actions.toCSV(t.source)}),t.$watch("form.separator",function(){t.actions.toCSV(t.source)}),t.showModal=function(t){t?o.find("#mdl-export").modal("show"):o.find("#mdl-export").modal("hide")},t.$watch("form.isVisible",function(o,e){t.showModal(o)}),o.bind("hide.bs.modal",function(){t.form.isVisible=!1,t.$$phase||t.$root.$$phase||t.$apply()})}}};
if(angular){var csvExportModule=angular.module("CsvExportModule",["ngCookies","pascalprecht.translate","tmh.dynamicLocale"]);csvExportModule.config(["$translateProvider","tmhDynamicLocaleProvider",function(o,e){console.debug("[CONFIG: CSV-EXPORT]","Configurando a aplicação."),console.debug("[CONFIG: CSV-EXPORT]","Configurando tradutores"),o.useStaticFilesLoader({prefix:"/src/lang/",suffix:".json"}),console.debug("[CONFIG: CSV-EXPORT]","Configurando l10n."),o.preferredLanguage("pt-br"),o.fallbackLanguage(["en-us"]),o.useCookieStorage(),console.debug("[CONFIG: CSV-EXPORT]","Configurando i18n."),e.defaultLocale("pt-br"),e.localeLocationPattern("/vendor/angular-i18n/angular-locale_{{locale}}.js"),e.useStorage("$cookieStore")}]),csvExportModule.factory("$csvExportService",[csvExportService]),csvExportModule.controller("CsvExportController",["$scope","$csvExportService",csvExportController]),csvExportModule.directive("csvExportDirective",[csvExportDirective]),csvExportModule.run(["$rootScope",function(o){"use strict";console.debug("[RUN: CSV-EXPORT]","Inicializando a aplicação.")}])}
//# sourceMappingURL=csv-export.min.js.map